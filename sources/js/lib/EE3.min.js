"use strict";function EE(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function EE3(){}var has=Object.prototype.hasOwnProperty,prefix="function"!=typeof Object.create?"~":!1;EE3.prototype._events=void 0,EE3.prototype.eventNames=function(){var e,t=this._events,n=[];if(!t)return n;for(e in t)has.call(t,e)&&n.push(prefix?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},EE3.prototype.listeners=function(e,t){var n=prefix?prefix+e:e,r=this._events&&this._events[n];if(t)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var s=0,i=r.length,o=new Array(i);i>s;s++)o[s]=r[s].fn;return o},EE3.prototype.emit=function(e,t,n,r,s,i){var o=prefix?prefix+e:e;if(!this._events||!this._events[o])return!1;var f,c,p=this._events[o],h=arguments.length;if("function"==typeof p.fn){switch(p.once&&this.removeListener(e,p.fn,void 0,!0),h){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,t),!0;case 3:return p.fn.call(p.context,t,n),!0;case 4:return p.fn.call(p.context,t,n,r),!0;case 5:return p.fn.call(p.context,t,n,r,s),!0;case 6:return p.fn.call(p.context,t,n,r,s,i),!0}for(c=1,f=new Array(h-1);h>c;c++)f[c-1]=arguments[c];p.fn.apply(p.context,f)}else{var a,v=p.length;for(c=0;v>c;c++)switch(p[c].once&&this.removeListener(e,p[c].fn,void 0,!0),h){case 1:p[c].fn.call(p[c].context);break;case 2:p[c].fn.call(p[c].context,t);break;case 3:p[c].fn.call(p[c].context,t,n);break;default:if(!f)for(a=1,f=new Array(h-1);h>a;a++)f[a-1]=arguments[a];p[c].fn.apply(p[c].context,f)}}return!0},EE3.prototype.on=function(e,t,n){var r=new EE(t,n||this),s=prefix?prefix+e:e;return this._events||(this._events=prefix?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):this._events[s]=r,this},EE3.prototype.once=function(e,t,n){var r=new EE(t,n||this,!0),s=prefix?prefix+e:e;return this._events||(this._events=prefix?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],r]:this._events[s].push(r):this._events[s]=r,this},EE3.prototype.removeListener=function(e,t,n,r){var s=prefix?prefix+e:e;if(!this._events||!this._events[s])return this;var i=this._events[s],o=[];if(t)if(i.fn)(i.fn!==t||r&&!i.once||n&&i.context!==n)&&o.push(i);else for(var f=0,c=i.length;c>f;f++)(i[f].fn!==t||r&&!i[f].once||n&&i[f].context!==n)&&o.push(i[f]);return o.length?this._events[s]=1===o.length?o[0]:o:delete this._events[s],this},EE3.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[prefix?prefix+e:e]:this._events=prefix?{}:Object.create(null),this):this},EE3.prototype.off=EE3.prototype.removeListener,EE3.prototype.addListener=EE3.prototype.on,EE3.prototype.setMaxListeners=function(){return this},EE3.prefixed=prefix,"undefined"!=typeof module&&(module.exports=EE3);